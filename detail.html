<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Home Page</title>
    <link href='https://fonts.googleapis.com/css?family=Poppins:300,700' rel='stylesheet' type='text/css'>
    <!-- Style Sheet-->
    <link rel="stylesheet" type="text/css" href="font/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/owl-carousel/owl.theme.css">
    <link rel="shortcut icon" href="images/favicon.ico">
    <!-- META TAGS -->
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="assets/css/customStyles.css">
    <!-- Option 1: Include in HTML -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

</head>

<body id="bd" class="cms-index-index cms-simen-home-page-v2 default cmspage">
    <div style="background: #1d2332;">
        <div id="sns_wrapper">
            <!-- HEADER -->
            <div id="sns_header" class="wrap">
                <!-- Header Top -->
                    <div class="sns_header_top">
                        <div class="container">
                            <div class="sns_module">
                                <div class="header-setting">
                                    <div class="module-setting">

                                    </div>
                                </div>
                                <div class="header-account">
                                    <div class="myaccount">
                                        <div class="customer-ct content">
                                            <ul class="links">
                                                <li class="first">
                                                    <a class="top-link-myaccount" title="My Account" href="dashboard.html">My Account</a>
                                                </li>
                                                <li class=" last">
                                                    <a title="Log In" href="login.html">Login</a>
                                                </li>
                                                <li>
                                                    <a href="index.html">location</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <!-- Menu -->
                    <div id="sns_menu">
                        <div class="container">
                            <div class="sns_mainmenu">
                                <div id="sns_mainnav">
                                    <div id="sns_custommenu" class="visible-md visible-lg">
                                        <ul class="mainnav">
                                            <li class="level0 custom-item active">
                                                <a class="menu-title-lv0 pd-menu116" href="detail.html" target="_self">
                                                    <span class="title">Home</span>
                                                </a>
                                            </li>
                                            <li class="level0 nav-4 no-group drop-submenu last parent">
                                                <a class="menu-title-lv0" href="job.html">
                                                    <span class="title">Jobs</span>
                                                </a>
                                            </li>
                                            <li class="level0 nav-4 no-group drop-submenu last parent">
                                                <a class="menu-title-lv0" href="shop.html">
                                                    <span class="title">Shop</span>
                                                </a>
                                            </li>
                                            <li class="level0 nav-4 no-group drop-submenu last parent">
                                                <a class="menu-title-lv0" href="404.html">
                                                    <span class="title">Services</span>
                                                </a>
                                            </li>
                                            <li class="level0 nav-4 no-group drop-submenu last parent">
                                                <a class="menu-title-lv0" href="404.html">
                                                    <span class="title">Community</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div id="sns_mommenu" class="menu-offcanvas hidden-md hidden-lg">
                                    <span class="btn2 btn-navbar leftsidebar" style="display: inline-block;">
                                        <i class="fa fa-align-left"></i>
                                        <span class="overlay"></span>
                                    </span>
                                    <span class="btn2 btn-navbar offcanvas">
                                        <i class="fa fa-align-justify"></i>
                                        <span class="overlay"></span>
                                    </span>
                                    <span class="btn2 btn-navbar rightsidebar">
                                        <i class="fa fa-align-right"></i>
                                        <span class="overlay"></span>
                                    </span>
                                    <div id="menu_offcanvas" class="offcanvas">
                                        <ul class="mainnav">
                                            <li class="level0 custom-item">
                                                <div class="accr_header">
                                                    <a class="menu-title-lv0" href="index.html">
                                                        <span class="title">Home</span>
                                                    </a>
                                                </div>
                                            </li>
    
                                            <li class="level0 nav-6 parent">
                                                <div class="accr_header">
                                                    <a class=" menu-title-lv0" href="#">
                                                        <span>All products</span>
                                                    </a>
                                                    <span class="btn_accor">
    
                                                    </span>
                                                </div>
                                            </li>
                                            <li class="level0 nav-7">
                                                <div class="accr_header">
                                                    <a class=" menu-title-lv0" href="#">
                                                        <span>Shop</span>
                                                    </a>
                                                </div>
                                            </li>
    
                                            <li class="level0 custom-item">
                                                <div class="accr_header">
                                                    <a class="menu-title-lv0" href="contact-us.html">
                                                        <span class="title">Contact Us</span>
                                                    </a>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="sns_menu_right">
                                <div class="block_topsearch">
    
                                    <span class="icon-search"></span>
                                    <div class="top-search">
                                        <div id="sns_serachbox_pro11739847651442478087" class="sns-serachbox-pro">
                                            <div class="sns-searbox-content">
                                                <form id="search_mini_form3703138361442478087" method="get"
                                                    action="http://demo.snstheme.com/sns-simen/index.php/catalogsearch/result/">
                                                    <div class="form-search">
                                                        <input id="search3703138361442478087" class="input-text"
                                                            type="text" value="" name="q" placeholder="Search here...."
                                                            size="30" autocomplete="off">
                                                        <button class="button form-button" title="Search"
                                                            type="submit">Search</button>
                                                        <div id="search_autocomplete3703138361442478087"
                                                            class="search-autocomplete" style="display: none;"></div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END HEADER -->

            <!-- CONTENT -->
            <div id="sns_content" class="wrap layout-m">
                <div class="container">
                    <div class="row">
                        <div id="sns_main" class="col-md-12">
                            <div id="sns_mainmidle">
                                <div id="sns_producttaps1" class="sns_producttaps_wraps">
                                    <div class="sns-products-list">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="block-title list-group-item">
                                                    <h3><a href="#home" aria-controls="home" role="tab"
                                                        data-toggle="tab">Featured</a></h3>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="tab-content ">
                                            <div class="products-small owl-carousel owl-theme"
                                                style="display: inline-block">
                                                <div id="featured">
    
                                                <!-- INSERT FEATURED HERE -->
                                                       
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="load-more-wrapper">
                                        <p id="load_more_featured">Load More Featured</p>
                                    </div>
                                    <br>

                                    <div class="sns-products-list">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="block-title list-group-item">
                                                    <h3><a href="shop.html">For Sale</a></h3>
                                                </div>
                                            </div>
                                            <div class="products-small owl-carousel owl-theme"
                                                style="display: inline-block">
                                                <div class="item-row">
                                                    <div id="for_sale">
                                                
                                                <!-- INSERT FOR SALE HERE -->
                            
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="load-more-wrapper">
                                        <p id="load_more_for_sale">Load More For Sale</p>
                                    </div>
                                    <div class="sns-latestblog">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="block-title list-group-item">
                                                    <h3><a href="job.html" >Job Postings</a></h3>
                                                </div>
                                            </div>
                                            <div id="jobs">

                                                <!-- INSERT JOBS HERE -->

                                            </div>
                                        </div>
                                    </div>
                                    <div class="load-more-wrapper">
                                        <p id ="load_more_jobs">
                                        Load More Jobs
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END CONTENT -->



                <!-- FOOTER -->
                <div id="sns_footer" class="footer_style vesion2 wrap">
                    <div id="sns_footer_top" class="footer" style="background: #2f3546;">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-3 col-sm-6 col-xs-12">
                                    <div class="sns-footer">
                                        <div class="container">
                                            <div class="container_in">
                                                <div class="row">
                                                    <div class="col-md-3 col-sm-12 col-xs-12 column0">
                                                        <div class="contact_us">
                                                            <h6>Contact us</h6>
                                                            <ul class="fa-ul">
                                                                <li class="pd-right">
                                                                    <i class="fa-li fa fw fa-home"> </i>
                                                                    8888 South Avenue Street, New York
                                                                </li>
                                                                <li class="pd-right">
                                                                    <i class="fa-li fa fw fa-home"> </i>
                                                                    (123) 456 7896
                                                                </li>
                                                                <li>
                                                                    <i class="fa-li fa fw fa-envelope"> </i>
                                                                    <a
                                                                        href="mailto:info@yourdomain.com">info@yourdomain.com</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div id="sns_footer_bottom" class="footer">
                                        <div class="container">
                                            <div class="row">
                                                <div class="bottom-pd1 col-sm-6">
                                                    <div class="sns-copyright text-center">
                                                        Emma Hopkins - Nate Brewer - Danny Poff
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- END FOOTER -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <!-- Scripts -->
    <script src="assets/js/jquery-1.9.1.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/less.min.js"></script>
    <script src="assets/js/owl-carousel/owl.carousel.min.js"></script>
    <script src="assets/js/sns-extend.js"></script>
    <script src="assets/js/custom.js"></script>
    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- post API Script -->
    <script src="assets/js/post_api.js"></script>
    <script>

        var featuredLower = 0;

        var jobLower = 0;

        var forSaleLower = 0;


        // Makes axios passable
        const myAxios = axios;

        function htmlBuilder(query, html){
            let itemContainer = document.getElementById(query);
            itemContainer.insertAdjacentHTML("beforeend", html);
        }

            /*
            *      WRITE FEATURED 
            */
        function writeFeatured(lower){

            let featuredPosts = getFeaturedPosts(myAxios, lower, lower+5)
            .then(featured => { 
                var html = "";

                //console.log(featured);

                for(let i = 0; i < featured.length; i++){

                    //console.log(featured[i]);

                    var htmlSegment = "";

                    

                        htmlSegment =
                            `<div class="item list-group-item">
                                <div class="item-inner">
                                    <div class="prd">
                                        <div class="item-img clearfix">
                                            <a class="product-image have-additional" href="#">
                                                <span class="img-main">
                                                    <!--leaving picture empty-->
                                                    <img src="="${featured[i].img}
                                                        style="height:7em; width:7em;">
                                                </span>
                                            </a>
                                        </div>
                                        <div class="item-info">
                                            <div class="info-inner">
                                                <div class="item-title">
                                                    <a href="itemDetail.html?id=${featured[i].id}&type=f">
                                                    ${featured[i].post_title} 
                                                    </a>
                                                </div>
                                                <div class="item-price">
                                                    <div class="price-box">
                                                        <span class="regular-price">
                                                            <span class="price">
                                                                <span
                                                                class="price1">${featured[i].price}</span>
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="action-bot">
                                                <div class="wrap-addtocart">
                                                    <button class="btn-cart"
                                                        title="Add to Cart">
                                                        <i class="fa fa-shopping-cart"></i>
                                                        <span><a href="#home"
                                                            aria-controls="home" role="tab"
                                                            data-toggle="tab">Message
                                                            ${featured[i].created_by}</a></span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>`;
                        

                        /*

                        else if(featured[i].is_job == true){

                            console.log("Featured Job");

                            htmlSegment =
                                `<div id="${featured[i].id}" class="latestblog-content owl-carousel owl-theme"
                                    style="display: inline-block">
                                    <div class="item">
                                        <div class="blog-page list-group-item">
                                            <div class="blog-left">
                                                <p class="text1">08</p>
                                                <p class="text2">JAN</p>
                                            </div>
                                            <div class="blog-right">
                                                <p class="style1"><a href="itemDetail.html?id=${featured[i].id}&type=j">${featured[i].created_by}</a></p>
                                                <p class="style2">${featured[i].post_title}</p>
                                                <p class="style3">${featured[i].post_content}</p>
                                            </div>
                                        </div>
                                    </div>                                                                                                 
                                </div>`;
                        }

                        */

                    html += htmlSegment;

                }

                htmlBuilder("featured", html);

            });
            return featuredLower += 5;
        }
        /*
         *      WRITE JOBS 
         */
        function writeJobs(lower){; 

            //console.log(lower);

            getJobs(myAxios, lower, lower+5)
            .then(jobs => { 
                var html = "";

                //console.log(jobs);

                for(let i = 0; i < jobs.length; i++){

                    /*

                    let date = jobs[i].date_created;
                    let day = "";
                    var month =  "";

                    // TODO: make below into a function

                    // Gets the day and month number
                    if(date.length == 10){

                        day = date.slice(8);
                        month = date.slice(5,8);

                    }
                    else if(date.length == 9){

                        // TODO: get day and month. This one needs to make use of the fact that the month could be a length of one vis a vi the day can too. 

                    }
                    else if(date.length == 8){

                        day = date.slice(7);
                        month = date.slice(5, 7);

                    }   
                    // TODO: switch for month

                    */

                    //console.log(jobs[i]);

                    let htmlSegment =
                        `<div id="${jobs[i].id}" class="latestblog-content owl-carousel owl-theme"
                            style="display: inline-block">
                            <div class="item ">
                                <div class="blog-page list-group-item">
                                    <div class="blog-left">
                                        <p class="text1">08</p>
                                        <p class="text2">JAN</p>
                                    </div>
                                    <div class="blog-right">
                                        <p class="style1"><a href="itemDetail.html?id=${jobs[i].id}&type=j">${jobs[i].created_by}</a></p>
                                        <p class="style2">${jobs[i].post_title}</p>
                                        <p class="style3">${jobs[i].post_content}</p>
                                    </div>
                                </div>
                            </div>                                                                                                 
                        </div>`;

                    html += htmlSegment;

                }

                htmlBuilder("jobs", html);
                
            });

            return jobLower += 5;
        }

        /*
         *      WRITE COMMON POST
         */

        function writeForSale(lower){
                                                 // 5 per page
            let commonPost = getForSale(myAxios, lower, lower+5)
            // This waits for the promise then plucks the array (posts) will treat the data in the html constructor as an array
            .then(posts => { 
                var html = "";

                //console.log(posts);

                for(let i = 0; i < posts.length; i++){

                    //console.log(posts[i]);

                    let htmlSegment =
                        `
                                <div class="item list-group-item">
                                    <div class="item-inner">
                                        <div class="prd">
                                            <div class="item-img clearfix">
                                                <a class="product-image have-additional" href="#">
                                                    <span class="img-main">
                                                        <!--leaving picture empty-->
                                                        <img src="="${posts[i].img}
                                                            style="height:7em; width:7em;">
                                                    </span>
                                                </a>
                                            </div>
                                            <div class="item-info">
                                                <div class="info-inner">
                                                    <div class="item-title">
                                                        <a href="itemDetail.html?id=${posts[i].id}&type=s">
                                                        ${posts[i].post_title} 
                                                        </a>
                                                    </div>
                                                    <div class="item-price">
                                                        <div class="price-box">
                                                            <span class="regular-price">
                                                                <span class="price">
                                                                    <span
                                                                    class="price1">${posts[i].price}</span>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="action-bot">
                                                    <div class="wrap-addtocart">
                                                        <button class="btn-cart"
                                                            title="Add to Cart">
                                                            <i class="fa fa-shopping-cart"></i>
                                                            <span><a href="#home"
                                                                aria-controls="home" role="tab"
                                                                data-toggle="tab">Message
                                                                ${posts[i].created_by}</a></span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>`;

                    html += htmlSegment;

                }

                htmlBuilder("for_sale", html);

                //document.querySelector('#for-sale').innerHtml = html;

            });
            return forSaleLower += 5;
        }

        featuredLower = writeFeatured(featuredLower);
        jobLower -writeJobs(jobLower);
        forSaleLower = writeForSale(forSaleLower);

        document.getElementById('load_more_featured').addEventListener('click', function(){
            featuredLower = writeJobs(featuredLower);
        });

        document.getElementById('load_more_jobs').addEventListener('click', function(){
            jobLower = writeJobs(jobLower);
        });

        document.getElementById('load_more_for_sale').addEventListener('click', function(){
            forSaleLower = writeForSale(forSaleLower);
        });
        

            /*

            created_by = String,

            date_Created = (getYear()'-'getMonth()+1'-'getDate()),
            time_created = (getHours()':'getMinutes()':'getSeconds()),

            post_title = string,
            post_content = string,
            type [ Array ],
            city = string,
            state = string,
            price = string,
            post_views = int,


            */

    </script>

</body>

</html>